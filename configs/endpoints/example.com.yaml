enabled: true

endpoints:
  "/api":
    strategy: round-robin # random, weighted, round-robin
    urls:
      - url: "https://example.com/api1"
        # Optional: socks5, username, password
        socks5: "127.0.0.1:1080"
        username: "user1"
        password: "pass1"
      - url: "https://example.com/api2"
      - url: "https://example.com/api3"
    ban:
      - match : ["429", "try after some time"]
        duration: 30 # temporarily disables a backend for 30 secs
      - match : ["500"]
        duration: 3600

  "/path":
    strategy: weighted
    urls:
      - url: "https://example.com/api1"
        weight: 50 # Required for weighted strategy
      - url: "https://example.com/api2"
        weight: 30
      - url: "https://example.com/api3"
        weight: 20

# Applies to all endpoints and is overridden locally
global_ban:
  - match: ["429"]
    duration: 30 # in seconds
  - match: ["503", "out of capacity"]
    duration: 3600
